## 以TDD With codeium/Copilot方式完成保龄球积分

### 保龄球需求分析

#### 需求描述
请你设计一个计算保龄球比赛一局总得分的程序,保龄球的计分规则如下:

- 每一局总共有十轮,每轮一开始会有十支球瓶,球手可以扔两次球,目标就是用尽量少的球把全部球瓶击倒。

- 如果第一球就把全部的球瓶都击倒了,也就是STRIKE,画面出现“X”,就算完成一轮了,所得分数是10分再加后面两球的倒瓶数。

- 如果第一球没有全倒,就要再打一球,如果第二球将剩下的球瓶全都击倒,也就是SPARE,画面出现“/”,也算完成一格,所得分数为10分再加下一轮第一球的倒瓶数。

- 如果第二球也没有把球瓶全部击倒的话,那分数就是第一球加第二球倒的瓶数,没有奖励(bonus),再接着打下一轮。依此类推。

- 第十轮有机会扔三次球。如果在第十轮出现STRIKE或者SPARE,则球手可再加打第三球。

- 全部十轮的得分相加就等于这一局的总得分。

#### 需求分析

- 系统目标:能够正确计算出每一局的分数,避免陷入某一轮的细节
- 总分是在一局结束后才能知道,不需要实时显示分数
- 系统不需要关注画面出现“/或者X”,这是线下的设施
- 一格和一轮是属于相似概念
- 第十轮如果出现STRIKE,可以再打两球;如果出现SPARE,可以再打一球。总分为3次倒球数总和
- 某一轮可能出现的场景:
  - 某轮中,两次扔球都没有碰到球,所得分数为0。
  - 某轮中,两次扔球都没有将球瓶全部击倒,所得分数为两球的倒瓶数总和。
  - 某轮中,第一球就把全部的球瓶都击倒,STRIKE,所得分数是10分再加后面两球的倒瓶数。
  - 某轮中,第二球将剩下的全部球品击倒,SPARE,所得分数为10分再加下一轮第一球的倒瓶数。
  - 场景1是场景2的极端情况,我们可以合并为一种场景,都是按照两次扔球的数量算本轮分数

- 每轮有三种情况,那10轮的话应该是3^10 = 59049种业务场景,这样的场景是最完整的,但是为了能够让TDD践行下去,我们可以进一步抽象。其实10轮只是1轮的重复,这里说的重复是计分规则重复。比如说:我第1轮打出STRIKE,和第5轮打出STRIKE计分规则没什么区别。所以只要确保有一轮出现对应的场景就可以。
- 所以抽象后的场景可以描述为:
  - 一局中每一轮的两次扔球都没有碰到球,所得分数为0。
  - 一局中每一轮的两次扔球都没有全部击倒球瓶,所得分数为每次扔球的倒瓶数总和。
  - 一局中存在一轮SPARE,所得分数为每次扔球的倒瓶数总和再加SPARE轮后的一球的倒瓶数。
  - 一局中存在一轮STRIKE,所得分数为每次扔球的倒瓶数总和再加STRIKE轮后两球的倒瓶数。
  - 一局中十轮均为STRIKE,所得分数300。
